## Changes by Kind

### Feature

- Add autoscaling from zero support with auto-population of AzureMachineTemplate capacity/nodeInfo ([#6013](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/6013), [@LiangquanLi930](https://github.com/LiangquanLi930))
- Adding a zone field to the NAT Gateway spec to allow users to specify the zone in which the created NAT Gateway needs to reside in. ([#5738](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5738), [@rna-afk](https://github.com/rna-afk))
- The version of ASO installed with CAPZ is now v2.13.0. ([#5832](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5832), [@nojnhuh](https://github.com/nojnhuh))

### Failing Test

- Fix: downgrade prometheus dependencies to fix E2E test panic ([#6010](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/6010), [@damdo](https://github.com/damdo))
- Updated flatcar-sysext flavor template to refer to https://extensions.flatcar.org/extensions instead of https://github.com/flatcar/sysext-bakery/releases/tag/latest ([#5941](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5941), [@nojnhuh](https://github.com/nojnhuh))

### Bug or Regression

- Eliminated meaningless updates to the order of agent pool profiles when creating an ASO ManagedCluster for an AzureASOManagedControlPlane. ([#5940](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5940), [@nojnhuh](https://github.com/nojnhuh))
- Fix clusterctl init --infrastructure azure failure by adding missing kind field to metadata.yaml ([#5835](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5835), [@zoroglucihat](https://github.com/zoroglucihat))
- Fix misleading Service Principal credential warning when using WorkloadIdentity or managed identity authentication. The warning about SP credentials being written to disk now only appears when actually using Service Principal identity types. ([#5990](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5990), [@bryan-cox](https://github.com/bryan-cox))
- Fixed a regression where user-assigned identities with IDs prefixed with `azure://` for AzureMachines were misidentified as missing. ([#5930](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5930), [@nojnhuh](https://github.com/nojnhuh))

### Other (Cleanup or Flake)

- Bump CAPI to v1.10.7 ([#5909](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5909), [@mboersma](https://github.com/mboersma))
- Bump CAPI to v1.11.3 ([#5979](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5979), [@chrischdi](https://github.com/chrischdi))
- Bump CAPI to v1.11.4 ([#5998](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5998), [@mboersma](https://github.com/mboersma))
- Bump CAPI to v1.11.5 ([#6056](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/6056), [@mboersma](https://github.com/mboersma))
- CAPZ no longer updates a VMSS backing an AzureMachinePool with the latest kubeadm bootstrap data until other changes to the VMSS which require fresh bootstrap data are required. ([#6048](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/6048), [@nojnhuh](https://github.com/nojnhuh))
- Removed last usage of the deprecated go-autorest libraries. ([#5939](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5939), [@nojnhuh](https://github.com/nojnhuh))
- Update Calico to 3.29 ([#5844](https://github.com/kubernetes-sigs/cluster-api-provider-azure/pull/5844), [@marosset](https://github.com/marosset))

## Dependencies

### Added
- github.com/containerd/errdefs/pkg: [v0.3.0](https://github.com/containerd/errdefs/tree/pkg/v0.3.0)
- github.com/containerd/errdefs: [v1.0.0](https://github.com/containerd/errdefs/tree/v1.0.0)
- github.com/containerd/typeurl/v2: [v2.2.0](https://github.com/containerd/typeurl/tree/v2.2.0)
- github.com/gkampitakis/ciinfo: [v0.3.2](https://github.com/gkampitakis/ciinfo/tree/v0.3.2)
- github.com/gkampitakis/go-diff: [v1.3.2](https://github.com/gkampitakis/go-diff/tree/v1.3.2)
- github.com/gkampitakis/go-snaps: [v0.5.15](https://github.com/gkampitakis/go-snaps/tree/v0.5.15)
- github.com/go-faker/faker/v4: [v4.6.1](https://github.com/go-faker/faker/tree/v4.6.1)
- github.com/goccy/go-yaml: [v1.18.0](https://github.com/goccy/go-yaml/tree/v1.18.0)
- github.com/grafana/regexp: [a468a5b](https://github.com/grafana/regexp/tree/a468a5b)
- github.com/joshdk/go-junit: [v1.0.0](https://github.com/joshdk/go-junit/tree/v1.0.0)
- github.com/maruel/natural: [v1.1.1](https://github.com/maruel/natural/tree/v1.1.1)
- github.com/mfridman/tparse: [v0.18.0](https://github.com/mfridman/tparse/tree/v0.18.0)
- github.com/moby/sys/atomicwriter: [v0.1.0](https://github.com/moby/sys/tree/atomicwriter/v0.1.0)
- github.com/moby/sys/sequential: [v0.6.0](https://github.com/moby/sys/tree/sequential/v0.6.0)
- github.com/prometheus/otlptranslator: [8549f4a](https://github.com/prometheus/otlptranslator/tree/8549f4a)
- github.com/tidwall/gjson: [v1.18.0](https://github.com/tidwall/gjson/tree/v1.18.0)
- github.com/tidwall/match: [v1.1.1](https://github.com/tidwall/match/tree/v1.1.1)
- github.com/tidwall/pretty: [v1.2.1](https://github.com/tidwall/pretty/tree/v1.2.1)
- github.com/tidwall/sjson: [v1.2.5](https://github.com/tidwall/sjson/tree/v1.2.5)
- go.yaml.in/yaml/v2: v2.4.3
- go.yaml.in/yaml/v3: v3.0.4
- gonum.org/v1/gonum: v0.16.0
- gopkg.in/go-jose/go-jose.v2: v2.6.3

### Changed
- cel.dev/expr: v0.23.0 → v0.24.0
- cloud.google.com/go/compute/metadata: v0.6.0 → v0.9.0
- github.com/Azure/azure-sdk-for-go/sdk/azcore: [v1.18.2 → v1.21.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/azcore/v1.18.2...sdk/azcore/v1.21.0)
- github.com/Azure/azure-sdk-for-go/sdk/azidentity: [v1.11.0 → v1.13.1](https://github.com/Azure/azure-sdk-for-go/compare/sdk/azidentity/v1.11.0...sdk/azidentity/v1.13.1)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/compute/armcompute/v6: [v6.3.0 → v6.4.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/resourcemanager/compute/armcompute/v6/v6.3.0...sdk/resourcemanager/compute/armcompute/v6/v6.4.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/containerservice/armcontainerservice/v6: [v6.4.0 → v6.6.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/resourcemanager/containerservice/armcontainerservice/v6/v6.4.0...sdk/resourcemanager/containerservice/armcontainerservice/v6/v6.6.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/storage/armstorage: [v1.7.0 → v1.8.1](https://github.com/Azure/azure-sdk-for-go/compare/sdk/resourcemanager/storage/armstorage/v1.7.0...sdk/resourcemanager/storage/armstorage/v1.8.1)
- github.com/Azure/azure-sdk-for-go/sdk/security/keyvault/azsecrets: [v1.3.1 → v1.4.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/security/keyvault/azsecrets/v1.3.1...sdk/security/keyvault/azsecrets/v1.4.0)
- github.com/Azure/azure-sdk-for-go/sdk/security/keyvault/internal: [v1.1.1 → v1.2.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/security/keyvault/internal/v1.1.1...sdk/security/keyvault/internal/v1.2.0)
- github.com/AzureAD/microsoft-authentication-library-for-go: [v1.4.2 → v1.6.0](https://github.com/AzureAD/microsoft-authentication-library-for-go/compare/v1.4.2...v1.6.0)
- github.com/GoogleCloudPlatform/opentelemetry-operations-go/detectors/gcp: [v1.27.0 → v1.30.0](https://github.com/GoogleCloudPlatform/opentelemetry-operations-go/compare/detectors/gcp/v1.27.0...detectors/gcp/v1.30.0)
- github.com/Masterminds/semver/v3: [v3.3.0 → v3.4.0](https://github.com/Masterminds/semver/compare/v3.3.0...v3.4.0)
- github.com/cenkalti/backoff/v5: [v5.0.2 → v5.0.3](https://github.com/cenkalti/backoff/compare/v5.0.2...v5.0.3)
- github.com/cncf/xds/go: [ae57f3c → 0feb691](https://github.com/cncf/xds/compare/ae57f3c...0feb691)
- github.com/coredns/corefile-migration: [v1.0.26 → v1.0.29](https://github.com/coredns/corefile-migration/compare/v1.0.26...v1.0.29)
- github.com/coreos/go-oidc: [v2.2.1+incompatible → v2.3.0+incompatible](https://github.com/coreos/go-oidc/compare/v2.2.1...v2.3.0)
- github.com/docker/docker: [v28.0.2+incompatible → v28.3.3+incompatible](https://github.com/docker/docker/compare/v28.0.2...v28.3.3)
- github.com/envoyproxy/go-control-plane/envoy: [v1.32.4 → v1.35.0](https://github.com/envoyproxy/go-control-plane/compare/envoy/v1.32.4...envoy/v1.35.0)
- github.com/envoyproxy/go-control-plane: [v0.13.4 → 75eaa19](https://github.com/envoyproxy/go-control-plane/compare/v0.13.4...75eaa19)
- github.com/fsnotify/fsnotify: [v1.8.0 → v1.9.0](https://github.com/fsnotify/fsnotify/compare/v1.8.0...v1.9.0)
- github.com/go-jose/go-jose/v4: [v4.0.5 → v4.1.3](https://github.com/go-jose/go-jose/compare/v4.0.5...v4.1.3)
- github.com/go-viper/mapstructure/v2: [v2.3.0 → v2.4.0](https://github.com/go-viper/mapstructure/compare/v2.3.0...v2.4.0)
- github.com/golang/glog: [v1.2.4 → v1.2.5](https://github.com/golang/glog/compare/v1.2.4...v1.2.5)
- github.com/google/cel-go: [v0.22.1 → v0.23.2](https://github.com/google/cel-go/compare/v0.22.1...v0.23.2)
- github.com/gorilla/websocket: [v1.5.3 → e064f32](https://github.com/gorilla/websocket/compare/v1.5.3...e064f32)
- github.com/grpc-ecosystem/grpc-gateway/v2: [v2.27.1 → v2.27.3](https://github.com/grpc-ecosystem/grpc-gateway/compare/v2.27.1...v2.27.3)
- github.com/onsi/ginkgo/v2: [v2.23.4 → v2.27.5](https://github.com/onsi/ginkgo/compare/v2.23.4...v2.27.5)
- github.com/onsi/gomega: [v1.38.0 → v1.39.0](https://github.com/onsi/gomega/compare/v1.38.0...v1.39.0)
- github.com/pkg/sftp: [v1.13.9 → v1.13.10](https://github.com/pkg/sftp/compare/v1.13.9...v1.13.10)
- github.com/prometheus/client_golang: [v1.22.0 → v1.23.0](https://github.com/prometheus/client_golang/compare/v1.22.0...v1.23.0)
- github.com/prometheus/procfs: [v0.16.1 → v0.19.2](https://github.com/prometheus/procfs/compare/v0.16.1...v0.19.2)
- github.com/rogpeppe/go-internal: [v1.13.1 → v1.14.1](https://github.com/rogpeppe/go-internal/compare/v1.13.1...v1.14.1)
- github.com/samber/lo: [v1.49.1 → v1.51.0](https://github.com/samber/lo/compare/v1.49.1...v1.51.0)
- github.com/spf13/pflag: [v1.0.7 → v1.0.10](https://github.com/spf13/pflag/compare/v1.0.7...v1.0.10)
- github.com/spf13/viper: [v1.20.0 → v1.20.1](https://github.com/spf13/viper/compare/v1.20.0...v1.20.1)
- github.com/spiffe/go-spiffe/v2: [v2.5.0 → v2.6.0](https://github.com/spiffe/go-spiffe/compare/v2.5.0...v2.6.0)
- github.com/stretchr/testify: [v1.10.0 → v1.11.1](https://github.com/stretchr/testify/compare/v1.10.0...v1.11.1)
- go.etcd.io/etcd/api/v3: v3.5.20 → v3.5.22
- go.etcd.io/etcd/client/pkg/v3: v3.5.20 → v3.5.22
- go.etcd.io/etcd/client/v2: v2.305.16 → v2.305.21
- go.etcd.io/etcd/client/v3: v3.5.20 → v3.5.22
- go.etcd.io/etcd/pkg/v3: v3.5.16 → v3.5.21
- go.etcd.io/etcd/raft/v3: v3.5.16 → v3.5.21
- go.etcd.io/etcd/server/v3: v3.5.16 → v3.5.21
- go.opentelemetry.io/auto/sdk: v1.1.0 → v1.2.1
- go.opentelemetry.io/contrib/detectors/gcp: v1.35.0 → v1.38.0
- go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc: v0.54.0 → v0.58.0
- go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracegrpc: v1.37.0 → v1.39.0
- go.opentelemetry.io/otel/exporters/otlp/otlptrace: v1.37.0 → v1.39.0
- go.opentelemetry.io/otel/exporters/prometheus: v0.59.0 → v0.59.1
- go.opentelemetry.io/otel/metric: v1.37.0 → v1.39.0
- go.opentelemetry.io/otel/sdk/metric: v1.37.0 → v1.39.0
- go.opentelemetry.io/otel/sdk: v1.37.0 → v1.39.0
- go.opentelemetry.io/otel/trace: v1.37.0 → v1.39.0
- go.opentelemetry.io/otel: v1.37.0 → v1.39.0
- go.opentelemetry.io/proto/otlp: v1.7.0 → v1.9.0
- go.uber.org/mock: v0.5.2 → v0.6.0
- golang.org/x/crypto: v0.41.0 → v0.47.0
- golang.org/x/mod: v0.27.0 → v0.32.0
- golang.org/x/net: v0.42.0 → v0.49.0
- golang.org/x/oauth2: v0.30.0 → v0.32.0
- golang.org/x/sync: v0.16.0 → v0.19.0
- golang.org/x/sys: v0.35.0 → v0.40.0
- golang.org/x/telemetry: 8d8967a → 8fff8a5
- golang.org/x/term: v0.34.0 → v0.39.0
- golang.org/x/text: v0.28.0 → v0.33.0
- golang.org/x/time: v0.11.0 → v0.12.0
- golang.org/x/tools: v0.35.0 → v0.40.0
- google.golang.org/genproto/googleapis/api: 513f239 → ff82c1b
- google.golang.org/genproto/googleapis/rpc: 513f239 → ff82c1b
- google.golang.org/grpc: v1.73.0 → v1.77.0
- google.golang.org/protobuf: v1.36.6 → v1.36.10
- k8s.io/api: v0.32.3 → v0.33.6
- k8s.io/apiextensions-apiserver: v0.32.3 → v0.33.3
- k8s.io/apimachinery: v0.32.3 → v0.33.6
- k8s.io/apiserver: v0.32.3 → v0.33.4
- k8s.io/cli-runtime: v0.32.3 → v0.33.6
- k8s.io/client-go: v0.32.3 → v0.33.6
- k8s.io/cloud-provider: v0.32.2 → v0.33.4
- k8s.io/cluster-bootstrap: v0.32.3 → v0.33.3
- k8s.io/code-generator: v0.32.3 → v0.33.3
- k8s.io/component-base: v0.32.3 → v0.33.6
- k8s.io/component-helpers: v0.32.3 → v0.33.6
- k8s.io/controller-manager: v0.32.2 → v0.33.4
- k8s.io/gengo/v2: 2b36238 → 1244d31
- k8s.io/kms: v0.32.3 → v0.33.4
- k8s.io/kubectl: v0.32.3 → v0.33.6
- k8s.io/kubelet: v0.32.2 → v0.33.4
- k8s.io/metrics: v0.32.3 → v0.33.6
- sigs.k8s.io/cloud-provider-azure/pkg/azclient/cache: v0.4.0 → v0.8.1
- sigs.k8s.io/cloud-provider-azure/pkg/azclient/configloader: v0.4.1 → v0.8.2
- sigs.k8s.io/cloud-provider-azure/pkg/azclient: v0.5.9 → v0.9.1
- sigs.k8s.io/cloud-provider-azure: v1.32.3 → v1.33.6
- sigs.k8s.io/cluster-api/test: v1.10.4 → v1.11.5
- sigs.k8s.io/cluster-api: v1.10.4 → v1.11.5
- sigs.k8s.io/controller-runtime: v0.20.4 → v0.21.0
- sigs.k8s.io/kind: v0.29.0 → v0.31.0
- sigs.k8s.io/kustomize/api: v0.18.0 → v0.19.0
- sigs.k8s.io/kustomize/kustomize/v5: v5.5.0 → v5.6.0
- sigs.k8s.io/kustomize/kyaml: v0.18.1 → v0.19.0
- sigs.k8s.io/yaml: v1.4.0 → v1.6.0

### Removed
- github.com/Azure/azure-kusto-go/azkustodata: [5](https://github.com/Azure/azure-kusto-go/tree/azkustodata/5)
- github.com/Azure/azure-kusto-go/azkustoingest: [5](https://github.com/Azure/azure-kusto-go/tree/azkustoingest/5)
- github.com/Azure/azure-sdk-for-go/sdk/containers/azcontainerregistry: [v0.2.2](https://github.com/Azure/azure-sdk-for-go/tree/sdk/containers/azcontainerregistry/v0.2.2)
- github.com/Azure/azure-sdk-for-go/sdk/storage/azblob: [v1.4.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/storage/azblob/v1.4.0)
- github.com/Azure/azure-sdk-for-go/sdk/storage/azqueue: [v1.0.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/storage/azqueue/v1.0.0)
- github.com/Azure/azure-sdk-for-go: [v68.0.0+incompatible](https://github.com/Azure/azure-sdk-for-go/tree/v68.0.0)
- github.com/Azure/go-autorest/autorest/adal: [v0.9.24](https://github.com/Azure/go-autorest/tree/autorest/adal/v0.9.24)
- github.com/Azure/go-autorest/autorest/azure/auth: [v0.5.13](https://github.com/Azure/go-autorest/tree/autorest/azure/auth/v0.5.13)
- github.com/Azure/go-autorest/autorest/azure/cli: [v0.4.6](https://github.com/Azure/go-autorest/tree/autorest/azure/cli/v0.4.6)
- github.com/Azure/go-autorest/autorest/date: [v0.3.0](https://github.com/Azure/go-autorest/tree/autorest/date/v0.3.0)
- github.com/Azure/go-autorest/autorest/mocks: [v0.4.2](https://github.com/Azure/go-autorest/tree/autorest/mocks/v0.4.2)
- github.com/Azure/go-autorest/autorest: [v0.11.30](https://github.com/Azure/go-autorest/tree/autorest/v0.11.30)
- github.com/Azure/go-autorest/logger: [v0.2.1](https://github.com/Azure/go-autorest/tree/logger/v0.2.1)
- github.com/Azure/go-autorest/tracing: [v0.6.0](https://github.com/Azure/go-autorest/tree/tracing/v0.6.0)
- github.com/Azure/go-autorest: [v14.2.0+incompatible](https://github.com/Azure/go-autorest/tree/v14.2.0)
- github.com/dimchansky/utfbom: [v1.1.1](https://github.com/dimchansky/utfbom/tree/v1.1.1)
- github.com/gofrs/uuid: [v4.4.0+incompatible](https://github.com/gofrs/uuid/tree/v4.4.0)
- github.com/google/safetext: [b49f7bc](https://github.com/google/safetext/tree/b49f7bc)
- github.com/mitchellh/go-homedir: [v1.1.0](https://github.com/mitchellh/go-homedir/tree/v1.1.0)
- github.com/prashantv/gostub: [v1.1.0](https://github.com/prashantv/gostub/tree/v1.1.0)
- github.com/zeebo/errs: [v1.4.0](https://github.com/zeebo/errs/tree/v1.4.0)
- gopkg.in/square/go-jose.v2: v2.6.0

## Details
<!-- markdown-link-check-disable-next-line -->
https://github.com/kubernetes-sigs/cluster-api-provider-azure/compare/v1.21.0...v1.22.0
